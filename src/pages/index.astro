---
import Layout from "../layouts/Layout.astro";
import RioQuilichao from "../components/RioQuilichao.astro";
import RioDeOro from "../components/RioDeOro.astro";
import QuebradaSantaElena from "../components/QuebradaSantaElena.astro";
import ProjectTitle from "../components/ProjectTitle.astro";
---

<Layout title="Hidropoeticas - Inicio">
  <main class="h-screen w-screen flex flex-col overflow-hidden fixed inset-0">
    <!-- Project Title -->
    <ProjectTitle />
    
    <!-- Header -->

    <!-- Main Content - Colombia Hydrographic Map -->
    <section
      class="flex-1 flex items-center justify-center relative w-full h-full"
    >
      <!-- Background water effect removido para mejor visibilidad del mapa -->

      <!-- Water Background Effect with Colombia Map -->
      <div class="water-background">
        <!-- <div class="surface"></div>
        <div class="caustics"></div>
        <div class="bg"></div>
        <div class="sun">
          <div class="sun-layer1"></div>
          <div class="sun-layer2"></div>
          <div class="sun-layer3"></div>
        </div> -->

        <svg style="display: none;">
          <filter id="noise1">
            <feTurbulence
              type="turbulence"
              baseFrequency=".05"
              numOctaves="1"
              seed="3"
              stitchTiles="stitch"></feTurbulence>
            <feDisplacementMap in="SourceGraphic" scale="10"
            ></feDisplacementMap>
          </filter>
        </svg>
      </div>

      <div class="relative w-full h-full flex items-center justify-center z-20">
        <!-- Colombia Map Container -->
        <div class="relative w-full h-full flex items-center justify-center">
          <!-- Colombia Map SVG -->
          <svg
            viewBox="0 0 1000 700"
            class="w-full h-full max-w-none max-h-none opacity-90"
          >
            <!-- Rio Quilichao - Southwest (Cauca) -->
            <RioQuilichao cx="320" cy="445" />

            <!-- Rio de Oro - Northeast (Norte de Santander/Cesar) -->
            <RioDeOro cx="440" cy="180" />

            <!-- Quebrada Santa Elena - Northwest (MedellÃ­n, Antioquia) -->
            <QuebradaSantaElena cx="380" cy="300" />
          </svg>
        </div>
      </div>
    </section>

   
  </main>
</Layout>

<script>
  // Update ratioW based on aspect ratio
  function updateRatioW() {
    const aspectRatio = window.innerWidth / window.innerHeight;
    let ratioW = 1;

    if (aspectRatio >= 5) ratioW = 5;
    else if (aspectRatio >= 4) ratioW = 4;
    else if (aspectRatio >= 3) ratioW = 3;
    else if (aspectRatio >= 2) ratioW = 2;
    else if (aspectRatio >= 1) ratioW = 1;

    document.documentElement.style.setProperty("--ratioW", ratioW.toString());
  }

  updateRatioW();
  window.addEventListener("resize", updateRatioW);
</script>

<style>
  @import url("../styles/index.css");
</style>
