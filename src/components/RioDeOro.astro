---
export interface Props {
  cx: string;
  cy: string;
}

const { cx, cy } = Astro.props;
---

<g class="river-point group cursor-pointer" data-river="oro">
  <!-- SVG Definitions -->
  <defs>
    <linearGradient id="mapGradient-oro" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0ea5e9;stop-opacity:0.3" />
      <stop offset="50%" style="stop-color:#0891b2;stop-opacity:0.4" />
      <stop offset="100%" style="stop-color:#0f766e;stop-opacity:0.3" />
    </linearGradient>
    
    <!-- Enhanced shadow filter for video circles -->
    <filter id="videoShadow-oro" x="-100%" y="-100%" width="300%" height="300%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="8"/>
      <feOffset dx="0" dy="4" result="offset"/>
      <feFlood flood-color="#000" flood-opacity="0.3"/>
      <feComposite in2="offset" operator="in"/>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    
    <!-- Intense hover shadow filter -->
    <filter id="videoShadowHover-oro" x="-150%" y="-150%" width="400%" height="400%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="15"/>
      <feOffset dx="0" dy="8" result="offset"/>
      <feFlood flood-color="#4fe9ab" flood-opacity="0.4"/>
      <feComposite in2="offset" operator="in"/>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>
  
  <circle cx={cx} cy={cy} r="60" 
          fill="rgba(79, 233, 171, 0.1)" 
          stroke="rgba(79, 233, 171, 0.5)" 
          stroke-width="2" 
          class="transition-all duration-500 group-hover:r-70 group-hover:fill-opacity-20 md:r-50 md:group-hover:r-60"/>
  
  <!-- Video Circle -->
  <circle cx={cx} cy={cy} r="45" 
          fill="rgba(0, 0, 0, 0.3)" 
          filter="url(#videoShadow-oro)"
          class="transition-all duration-500 group-hover:r-80 group-hover:[filter:url(#videoShadowHover-oro)] md:r-35 md:group-hover:r-70"/>
  
  <foreignObject x={Number(cx) - 45} y={Number(cy) - 45} width="90" height="90" class="pointer-events-none transition-all duration-500 group-hover:scale-150 origin-center" style="overflow: visible;">
    <div class="w-full h-full rounded-full overflow-hidden border-2 border-cyan-400/50 group-hover:border-cyan-300 group-hover:border-4 transition-all duration-500 shadow-2xl group-hover:shadow-[0_0_50px_rgba(79,233,171,0.6)] relative">
      <!-- Static Image -->
      <img src="/rio-de-oro-preview.jpg" alt="Rio de Oro" class="w-full h-full object-cover transition-opacity duration-500 group-hover:opacity-0 absolute inset-0">
      <!-- Video on Hover -->
      <video 
        src="/Rio-de-Oro.MOV" 
        class="w-full h-full object-cover opacity-0 group-hover:opacity-100 transition-opacity duration-500 absolute inset-0" 
        autoplay 
        muted 
        loop
        onmouseenter="this.play()"
        onmouseleave="this.pause(); this.currentTime = 0;"
      ></video>
    </div>
  </foreignObject>
  
  <!-- Hover Label -->
  <foreignObject x={Number(cx) + 70} y={Number(cy) - 20} width="220" height="100" class="pointer-events-none">
    <div class="bg-gradient-to-r from-slate-900/95 to-slate-800/95 text-cyan-300 px-3 py-2 md:px-4 md:py-3 rounded-lg md:rounded-xl text-sm md:text-base font-semibold shadow-2xl border border-cyan-500/50 backdrop-blur-md opacity-0 group-hover:opacity-100 transition-all duration-500 transform translate-x-[-30px] translate-y-2 group-hover:translate-x-0 group-hover:translate-y-0 group-hover:scale-105">
      <div class="hidden md:block">Rio de Oro</div>
      <div class="md:hidden">Oro</div>
      <div class="text-xs text-cyan-400 font-normal mt-1 hidden md:block">Norte de Santander</div>
      <div class="text-xs text-cyan-400 font-normal mt-1 md:hidden">N. Santander</div>
    </div>
  </foreignObject>
  
  <!-- Click area -->
  <circle cx={cx} cy={cy} r="60" 
          fill="transparent" 
          class="cursor-pointer md:r-50"
          onclick="window.location.href='/rio-de-oro'"/>
</g>